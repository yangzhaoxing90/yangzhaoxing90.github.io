<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta 
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta 
    http-equiv="X-UA-Compatible" 
    content="ie=edge">
  <meta 
    name="theme-color" 
    content="#fff" 
    id="theme-color">
  <meta 
    name="description" 
    content="Hexo">
  <link 
    rel="icon" 
    href="/img/author.png">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
  <title>Spring-Framework 5.3.22</title>
  
    
      <meta 
        property="og:title" 
        content="Spring-Framework 5.3.22">
    
    
      <meta 
        property="og:url" 
        content="https://yangzhaoxing90.github.io/2022/07/25/Spring%20Framework%205.3.22/index.html">
    
    
      <meta 
        property="og:img" 
        content="/img/author.png">
    
    
    
      <meta 
        property="og:type" 
        content="article">
      <meta 
        property="og:article:published_time" 
        content="2022-07-25">
      <meta 
        property="og:article:modified_time" 
        content="2022-08-07">
      <meta 
        property="og:article:author" 
        content="Bluee">
      
        
          <meta 
            property="og:article:tag" 
            content="spring">
        
      
    
  
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
    function loadCSS(href, data, attr) {
      var sheet = document.createElement('link');
      sheet.ref = 'stylesheet';
      sheet.href = href;
      sheet.dataset[data] = attr;
      document.head.appendChild(sheet);
    }
    function changeCSS(cssFile, data, attr) {
      var oldlink = document.querySelector(data);
      var newlink = document.createElement("link");
      newlink.setAttribute("rel", "stylesheet");
      newlink.setAttribute("href", cssFile);
      newlink.dataset.prism = attr;
      document.head.replaceChild(newlink, oldlink);
    }
  </script>
  
    
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
  </script>
  
    <script>
      var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
        document.getElementById('theme-color').dataset.mode = setting;
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
        document.getElementById('theme-color').dataset.mode = getCssMediaQuery();
      }
    };
    setDarkmode();
    </script>
  
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
    <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
    <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
    
    <link rel="prefetch" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" as="script">
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">
  
    <link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">
  
<meta name="generator" content="Hexo 6.1.0"></head>

  <body>
    <div class="wrapper">
       
      <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
        <img 
          class="navbar-logo-img"
          width="32"
          height="32"
          src="/img/author.png" 
          alt="blog logo">
      
      <span class="navbar-logo-dsc">Bluee's blog</span>
    </span>
  </div>
  <div class="navbar-menu">
    
      <a 
        href="/" 
        class="navbar-menu-item">
        
          Home
        
      </a>
    
      <a 
        href="/archives" 
        class="navbar-menu-item">
        
          Archive
        
      </a>
    
      <a 
        href="/tags" 
        class="navbar-menu-item">
        
          Tags
        
      </a>
    
      <a 
        href="/categories" 
        class="navbar-menu-item">
        
          Categories
        
      </a>
    
      <a 
        href="/about" 
        class="navbar-menu-item">
        
          About
        
      </a>
    
      <a 
        href="/links" 
        class="navbar-menu-item">
        
          Friends
        
      </a>
    
    <a 
      class="navbar-menu-item darknavbar" 
      id="dark">
      <i class="iconfont icon-weather"></i>
    </a>
    <a 
      class="navbar-menu-item searchnavbar" 
      id="search">
      <i 
        class="iconfont icon-search" 
        style="font-size: 1.2rem; font-weight: 400;">
      </i>
    </a>
  </div>
</nav> 
      
      <div 
        id="local-search" 
        style="display: none">
        <input
          class="navbar-menu-item"
          id="search-input"
          placeholder="请输入搜索内容..." />
        <div id="search-content"></div>
      </div>
      
      <div class="section-wrap">
        <div class="container">
          <div class="columns">
            <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      Spring-Framework 5.3.22
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2022-07-25T08:23:11.000Z">
      <i 
        class="iconfont icon-calendar" 
        style="margin-right: 2px;">
      </i>
      <span>2022-07-25</span>
    </time>
    
    
      <span class="dot"></span>
      <span>8.9k words</span>
    
  </div>
  
    <div 
      class="post-meta post-show-meta" 
      style="margin-top: -10px;">
      <div style="display: flex; align-items: center;">
        <i 
          class="iconfont icon-biaoqian" 
          style="margin-right: 2px; font-size: 1.15rem;">
        </i>
        
          
          <a 
            href="/tags/spring/" 
            class="post-meta-link">
            spring
          </a>
        
      </div>
    </div>
  
  </header>
  <div 
    id="section" 
    class="post-content">
    <h1 id="spring-framework-5322"><a class="markdownIt-Anchor" href="#spring-framework-5322"></a> Spring Framework 5.3.22</h1>
<br>
<h2 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h2>
<hr>
<br>
history, design philosophy, feedback, getting started.
<br>
<p>As of Spring Framework 5.1, Spring requires JDK 8+ (Java SE 8+) and provides out-of-the-box support for JDK 11 LTS<br>
<br></p>
<p>Java SE 8 update 60 is suggested as the minimum patch release for Java 8, but it is generally recommended to use a recent patch release.<br>
<br></p>
<br>
<h3 id="what-we-mean-by-spring"><a class="markdownIt-Anchor" href="#what-we-mean-by-spring"></a> What we mean by “Spring”</h3>
<hr>
<br>
<p>Spring core contains<br>
configuration model and a dependency injection mechanism.<br>
<br></p>
<br>
the Spring Framework provides messaging, transactional data and persistence, and web. It also includes the Servlet-based Spring MVC web framework and, in parallel, the Spring WebFlux reactive web framework.
<br>
<br>
<h3 id="history-of-spring-and-the-spring-framework"><a class="markdownIt-Anchor" href="#history-of-spring-and-the-spring-framework"></a> History of Spring and the Spring Framework</h3>
<hr>
<br>
<p>begin: 2003, early j2EE specifications.<br>
it integrates with carefully selected individual specifications from the EE:<br>
…</p>
<br>
<h3 id="design-philosophy"><a class="markdownIt-Anchor" href="#design-philosophy"></a> Design Philosophy</h3>
<hr>
<br>
<ol>
<li>Provide choice at every level</li>
<li>It supports a wide range of application needs with different perspectives.</li>
<li>Spring supports a carefully chosen range of JDK versions and third-party libraries to facilitate maintenance of applications and libraries that depend on Spring.</li>
<li>Care about API design.</li>
<li>Set high standards for code quality.</li>
</ol>
<h3 id="feedback"><a class="markdownIt-Anchor" href="#feedback"></a> Feedback</h3>
<hr>
<br>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/spring+or+spring-mvc+or+spring-aop">https://stackoverflow.com/questions/tagged/spring+or+spring-mvc+or+spring-aop</a><br>
use stackoverflow</p>
<br>
<h3 id="getting-started"><a class="markdownIt-Anchor" href="#getting-started"></a> Getting Started</h3>
<hr>
<br>
<p><a target="_blank" rel="noopener" href="https://spring.io/guides/gs/rest-service/">https://spring.io/guides/gs/rest-service/</a></p>
<br>
<h2 id="core"><a class="markdownIt-Anchor" href="#core"></a> Core</h2>
<br>
<p>IoC Container, Events, Resources, i18n, Validation, Data Binding, Type Conversion, SpEL, AOP.</p>
<br>
<h3 id="the-ioc-container"><a class="markdownIt-Anchor" href="#the-ioc-container"></a> The IOC Container</h3>
<br>
<p>The basis packages for IOC Container:</p>
<blockquote>
<p>org.springframework.beans <br><br>
org.springframework.context <br><br>
BeanFactory <br><br>
ApplicationContext <br></p>
</blockquote>
<p>Configuration metadata:</p>
<blockquote>
<p>XML <br><br>
Java annotations <br><br>
Java code <br></p>
</blockquote>
<p>XML metadata load by :</p>
<blockquote>
<p>ClassPathXmlApplicationContext <br><br>
FileSystemXmlApplicationContext <br></p>
</blockquote>
<p>The basic structure of XML-based configuration metadata: <br></p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;  </span><br><span class="line">        &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;...&quot; class=&quot;...&quot;&gt;</span><br><span class="line">        &lt;!-- collaborators and configuration for this bean go here --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- more bean definitions go here --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"></span><br><span class="line">1. The id attribute is a string that identifies the individual bean definition.</span><br><span class="line">2. The class attribute defines the type of the bean and uses the fully qualified</span><br><span class="line">classname.</span><br><span class="line"></span><br></pre>
<p>Instantiating a Container: <br></p>
 <pre class="highlight"><span class="line">ApplicationContext context = new ClassPathXmlApplicationContext(&quot;services.xml&quot;, &quot;daos.xml&quot;);</span><br></pre>
<p>Composing XML-based Configuration Metadata:</p>
<pre class="highlight"><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;import resource=&quot;services.xml&quot;/&gt;</span><br><span class="line">    &lt;import resource=&quot;resources/messageSource.xml&quot;/&gt;</span><br><span class="line">    &lt;import resource=&quot;/resources/themeSource.xml&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;bean1&quot; class=&quot;...&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;bean2&quot; class=&quot;...&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Using the Container</p>
<pre class="highlight"><span class="line">// create and configure beans</span><br><span class="line">ApplicationContext context = new ClassPathXmlApplicationContext(&quot;services.xml&quot;, &quot;daos.xml&quot;);</span><br><span class="line"></span><br><span class="line">// retrieve configured instance</span><br><span class="line">PetStoreService service = context.getBean(&quot;petStore&quot;, PetStoreService.class);</span><br><span class="line"></span><br><span class="line">// use configured instance</span><br><span class="line">List&lt;String&gt; userList = service.getUsernameList();</span><br></pre>
<p>services.xml</p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- services --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;petStore&quot; class=&quot;org.springframework.samples.jpetstore.services.PetStoreServiceImpl&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;itemDao&quot; ref=&quot;itemDao&quot;/&gt;</span><br><span class="line">        &lt;!-- additional collaborators and configuration for this bean go here --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- more bean definitions for services go here --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>daos.xml</p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;accountDao&quot;</span><br><span class="line">        class=&quot;org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao&quot;&gt;</span><br><span class="line">        &lt;!-- additional collaborators and configuration for this bean go here --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;itemDao&quot; class=&quot;org.springframework.samples.jpetstore.dao.jpa.JpaItemDao&quot;&gt;</span><br><span class="line">        &lt;!-- additional collaborators and configuration for this bean go here --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- more bean definitions for data access objects go here --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>also can do with GenericApplicationContext:</p>
<pre class="highlight"><span class="line">GenericApplicationContext context = new GenericApplicationContext();</span><br><span class="line">new XmlBeanDefinitionReader(context).loadBeanDefinitions(&quot;services.xml&quot;, &quot;daos.xml&quot;);</span><br><span class="line">context.refresh();</span><br></pre>
<p>Bean Overview</p>
<p>these bean definitions are represented as <em><strong>BeanDefinition</strong></em> objects</p>
<p>BeanDefinition metadata:</p>
<blockquote>
<p>A package-qualified class name <br><br>
Bean behavioral configuration elments (scope, lifecycle, callbacks, and sor forth) <br><br>
dependencies (references to other beans) <br><br>
Other configuration settings <br></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core"> BeanDefinition Property: </a> <br></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Explained in …</th>
</tr>
</thead>
<tbody>
<tr>
<td>Class</td>
<td>Instantiating Beans</td>
</tr>
<tr>
<td>Name</td>
<td>Naming Beans</td>
</tr>
<tr>
<td>Scope</td>
<td>Bean Scope</td>
</tr>
<tr>
<td>Constructor arguments</td>
<td>Dependency Injection</td>
</tr>
<tr>
<td>Properties</td>
<td>Dependency Injection</td>
</tr>
<tr>
<td>Autowiring mode</td>
<td>Autowiring Collaborators</td>
</tr>
<tr>
<td>Lazy initialization mode</td>
<td>Lazy-initialized Beans</td>
</tr>
<tr>
<td>Initialization method</td>
<td>Initialization Callbacks</td>
</tr>
<tr>
<td>Destruction method</td>
<td>Destruction Callbacks</td>
</tr>
</tbody>
</table>
<br>
<p>Naming Beans</p>
<p>XML-based metadata:</p>
<blockquote>
<p>id attribute lets you specify exactly one id<br><br>
name attribute is alphanumeric, use ‘,’ or ’ ’ or ‘;’ splite multiple alias <br><br>
if not supply id and name, the container generates a unique name for that bean <br></p>
</blockquote>
<p>Bean Naming Conventions<br>
<br></p>
<blockquote>
<p>bean names start with a lowercase letter and are camel-cased from there. <br><br>
example: accountManager, userDao … <br><br>
in the (unusual) special case when there is more than one character and both the first and second characters are upper case, the original casing gets preserved. <br><br>
rules are defined in java.beans.Introspector.decapitalize <br></p>
</blockquote>
<p>Aliasing a Bean outside the Bean Definition</p>
<pre class="highlight"><span class="line">&lt;alias name=&quot;fromName&quot; alias=&quot;toName&quot;/&gt;</span><br></pre>
<p>if two subsystem use the same datasource:</p>
<pre class="highlight"><span class="line">&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemA-dataSource&quot;/&gt;</span><br><span class="line">&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemB-dataSource&quot;/&gt;</span><br></pre>
<p>Instantiating Beans</p>
<p>use Class property in one of two ways:</p>
<blockquote>
<p>calling its constructor reflectively <br><br>
invoke a static factory method <br></p>
</blockquote>
<p>Nested class names <br></p>
<blockquote>
<p>use either the binary name or the source name of the nested class <br><br>
example:  com.example.SomeThing$OtherThing or com.example.SomeThing.OtherThing <br></p>
</blockquote>
<p>Instantiation with a Constructor <br></p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean name=&quot;anotherExample&quot; class=&quot;examples.ExampleBeanTwo&quot;/&gt;</span><br></pre>
<br>
<p>Instantiation with a Static Factory Method</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;clientService&quot;</span><br><span class="line">    class=&quot;examples.ClientService&quot;</span><br><span class="line">    factory-method=&quot;createInstance&quot;/&gt;</span><br></pre>
<p>Java code</p>
<pre class="highlight"><span class="line">public class ClientService &#123;</span><br><span class="line">    private static ClientService clientService = new ClientService();</span><br><span class="line">    private ClientService() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    public static ClientService createInstance() &#123;</span><br><span class="line">        return clientService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Instantiation by Using an Instance Factory Method</p>
<p>instantiation with an instance factory method invokes a non-static method of an existing bean from the container to create a new bean.</p>
<pre class="highlight"><span class="line">&lt;!-- the factory bean, which contains a method called createInstance() --&gt;</span><br><span class="line">&lt;bean id=&quot;serviceLocator&quot; class=&quot;examples.DefaultServiceLocator&quot;&gt;</span><br><span class="line">    &lt;!-- inject any dependencies required by this locator bean --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- the bean to be created via the factory bean --&gt;</span><br><span class="line">&lt;bean id=&quot;clientService&quot;</span><br><span class="line">    factory-bean=&quot;serviceLocator&quot;</span><br><span class="line">    factory-method=&quot;createClientServiceInstance&quot;/&gt;</span><br></pre>
<p>Java code</p>
<pre class="highlight"><span class="line">public class DefaultServiceLocator &#123;</span><br><span class="line"></span><br><span class="line">    private static ClientService clientService = new ClientServiceImpl();</span><br><span class="line"></span><br><span class="line">    public ClientService createClientServiceInstance() &#123;</span><br><span class="line">        return clientService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>One factory class can also hold more than one factory Method</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;serviceLocator&quot; class=&quot;examples.DefaultServiceLocator&quot;&gt;</span><br><span class="line">    &lt;!-- inject any dependencies required by this locator bean --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;clientService&quot;</span><br><span class="line">    factory-bean=&quot;serviceLocator&quot;</span><br><span class="line">    factory-method=&quot;createClientServiceInstance&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;accountService&quot;</span><br><span class="line">    factory-bean=&quot;serviceLocator&quot;</span><br><span class="line">    factory-method=&quot;createAccountServiceInstance&quot;/&gt;</span><br></pre>
<p>java Code</p>
<pre class="highlight"><span class="line">public class DefaultServiceLocator &#123;</span><br><span class="line"></span><br><span class="line">    private static ClientService clientService = new ClientServiceImpl();</span><br><span class="line"></span><br><span class="line">    private static AccountService accountService = new AccountServiceImpl();</span><br><span class="line"></span><br><span class="line">    public ClientService createClientServiceInstance() &#123;</span><br><span class="line">        return clientService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public AccountService createAccountServiceInstance() &#123;</span><br><span class="line">        return accountService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Determining a Bean’s Runtime Type</p>
<blockquote>
<p>BeanFactory.getType call for the specified bean name. <br><br>
BeanFactory.getBean is going to return for the same bean name. <br></p>
</blockquote>
<p>Dependencies</p>
<p>Dependency Injection</p>
<blockquote>
<p>use DI, when the dependencies are on interfaces or abstract base classes, which allow for stub or mock implementations to be used in unit tests.</p>
</blockquote>
<p>Constructor-based Dependency Injection</p>
<p>easy case, constructor arguments has no inheritance</p>
<pre class="highlight"><span class="line">package x.y;</span><br><span class="line"></span><br><span class="line">public class ThingOne &#123;</span><br><span class="line"></span><br><span class="line">    public ThingOne(ThingTwo thingTwo, ThingThree thingThree) &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>do not need to specify the constructor argument indexes or types explicitly.</p>
<pre class="highlight"><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean id=&quot;beanOne&quot; class=&quot;x.y.ThingOne&quot;&gt;</span><br><span class="line">        &lt;constructor-arg ref=&quot;beanTwo&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg ref=&quot;beanThree&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;beanTwo&quot; class=&quot;x.y.ThingTwo&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;beanThree&quot; class=&quot;x.y.ThingThree&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>when a simple type is used.</p>
<pre class="highlight"><span class="line">public class SimpleMovieLister &#123;</span><br><span class="line"></span><br><span class="line">    // the SimpleMovieLister has a dependency on a MovieFinder</span><br><span class="line">    private final MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    // a constructor so that the Spring container can inject a MovieFinder</span><br><span class="line">    public SimpleMovieLister(MovieFinder movieFinder) &#123;</span><br><span class="line">        this.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // business logic that actually uses the injected MovieFinder is omitted...</span><br><span class="line">&#125;</span><br></pre>
<p>Constructor Argument Resolution</p>
<pre class="highlight"><span class="line">package examples;</span><br><span class="line"></span><br><span class="line">public class ExampleBean &#123;</span><br><span class="line"></span><br><span class="line">    // Number of years to calculate the Ultimate Answer</span><br><span class="line">    private final int years;</span><br><span class="line"></span><br><span class="line">    // The Answer to Life, the Universe, and Everything</span><br><span class="line">    private final String ultimateAnswer;</span><br><span class="line"></span><br><span class="line">    public ExampleBean(int years, String ultimateAnswer) &#123;</span><br><span class="line">        this.years = years;</span><br><span class="line">        this.ultimateAnswer = ultimateAnswer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Constructor argument type matching</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;</span><br><span class="line">    &lt;constructor-arg type=&quot;int&quot; value=&quot;7500000&quot;/&gt;</span><br><span class="line">    &lt;constructor-arg type=&quot;java.lang.String&quot; value=&quot;42&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Constructor argument index (The index is 0-based.)</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;</span><br><span class="line">    &lt;constructor-arg index=&quot;0&quot; value=&quot;7500000&quot;/&gt;</span><br><span class="line">    &lt;constructor-arg index=&quot;1&quot; value=&quot;42&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Constructor argument name</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;years&quot; value=&quot;7500000&quot;/&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;ultimateAnswer&quot; value=&quot;42&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>your code must be compiled with the debug flag enabled. <br><br>
or use the @ConstructorProperties annotation</p>
<pre class="highlight"><span class="line">package examples;</span><br><span class="line"></span><br><span class="line">public class ExampleBean &#123;</span><br><span class="line"></span><br><span class="line">    // Fields omitted</span><br><span class="line"></span><br><span class="line">    @ConstructorProperties(&#123;&quot;years&quot;, &quot;ultimateAnswer&quot;&#125;)</span><br><span class="line">    public ExampleBean(int years, String ultimateAnswer) &#123;</span><br><span class="line">        this.years = years;</span><br><span class="line">        this.ultimateAnswer = ultimateAnswer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Setter-based Dependency Injection</p>
<p>example, shows a class that can only be dependency-injected by using pure setter injection.</p>
<pre class="highlight"><span class="line">public class SimpleMovieLister &#123;</span><br><span class="line"></span><br><span class="line">    // the SimpleMovieLister has a dependency on the MovieFinder</span><br><span class="line">    private MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    // a setter method so that the Spring container can inject a MovieFinder</span><br><span class="line">    public void setMovieFinder(MovieFinder movieFinder) &#123;</span><br><span class="line">        this.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // business logic that actually uses the injected MovieFinder is omitted...</span><br><span class="line">&#125;</span><br></pre>
<blockquote>
<p>BeanDefinition - configure the dependencies in the form <br><br>
PropertyEditor - convert properties from one format to another <br></p>
</blockquote>
<p>Dependency Resolution Process</p>
<blockquote>
<p>ApplicationContext is created and initialized with configuration metadata that describes all beans. <br><br>
The dependencies (in the form of properties, constructor arguments or arguments to the static-factory method) are provided to the bean. <br><br>
Each property or constructor argument is an actual definition of the value to set, or a reference to another bean in the container. <br><br>
Each property or constructor argument that is a value is converted from its specified format to the actual type of that property or constructor argument.<br><br>
By default, Spring can convert a value supplied in string format to all built-in types, such as int, long, String, boolean, and so forth. <br></p>
</blockquote>
<p>Circular dependencies</p>
<blockquote>
<p>BeanCurrentlyInCreationException - If class A need B, class B need A. <br><br>
configure circular dependency with setter injection. <br></p>
</blockquote>
<p>Examples of Dependency Injection</p>
<p>setter-based DI, uses XML-based configuration metadata</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;</span><br><span class="line">    &lt;!-- setter injection using the nested ref element --&gt;</span><br><span class="line">    &lt;property name=&quot;beanOne&quot;&gt;</span><br><span class="line">        &lt;ref bean=&quot;anotherExampleBean&quot;/&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- setter injection using the neater ref attribute --&gt;</span><br><span class="line">    &lt;property name=&quot;beanTwo&quot; ref=&quot;yetAnotherBean&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;integerProperty&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;anotherExampleBean&quot; class=&quot;examples.AnotherBean&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;yetAnotherBean&quot; class=&quot;examples.YetAnotherBean&quot;/&gt;</span><br></pre>
<p>The following example shows the corresponding ExampleBean class:</p>
<pre class="highlight"><span class="line">public class ExampleBean &#123;</span><br><span class="line"></span><br><span class="line">    private AnotherBean beanOne;</span><br><span class="line"></span><br><span class="line">    private YetAnotherBean beanTwo;</span><br><span class="line"></span><br><span class="line">    private int i;</span><br><span class="line"></span><br><span class="line">    public void setBeanOne(AnotherBean beanOne) &#123;</span><br><span class="line">        this.beanOne = beanOne;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBeanTwo(YetAnotherBean beanTwo) &#123;</span><br><span class="line">        this.beanTwo = beanTwo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setIntegerProperty(int i) &#123;</span><br><span class="line">        this.i = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>The following example uses constructor-based DI:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;&gt;</span><br><span class="line">    &lt;!-- constructor injection using the nested ref element --&gt;</span><br><span class="line">    &lt;constructor-arg&gt;</span><br><span class="line">        &lt;ref bean=&quot;anotherExampleBean&quot;/&gt;</span><br><span class="line">    &lt;/constructor-arg&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- constructor injection using the neater ref attribute --&gt;</span><br><span class="line">    &lt;constructor-arg ref=&quot;yetAnotherBean&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;constructor-arg type=&quot;int&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;anotherExampleBean&quot; class=&quot;examples.AnotherBean&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;yetAnotherBean&quot; class=&quot;examples.YetAnotherBean&quot;/&gt;</span><br></pre>
<p>The following example shows the corresponding ExampleBean class:</p>
<pre class="highlight"><span class="line">public class ExampleBean &#123;</span><br><span class="line"></span><br><span class="line">    private AnotherBean beanOne;</span><br><span class="line"></span><br><span class="line">    private YetAnotherBean beanTwo;</span><br><span class="line"></span><br><span class="line">    private int i;</span><br><span class="line"></span><br><span class="line">    public ExampleBean(</span><br><span class="line">        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) &#123;</span><br><span class="line">        this.beanOne = anotherBean;</span><br><span class="line">        this.beanTwo = yetAnotherBean;</span><br><span class="line">        this.i = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Spring is told to call a static factory method to return an instance of the object:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot; factory-method=&quot;createInstance&quot;&gt;</span><br><span class="line">    &lt;constructor-arg ref=&quot;anotherExampleBean&quot;/&gt;</span><br><span class="line">    &lt;constructor-arg ref=&quot;yetAnotherBean&quot;/&gt;</span><br><span class="line">    &lt;constructor-arg value=&quot;1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;anotherExampleBean&quot; class=&quot;examples.AnotherBean&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;yetAnotherBean&quot; class=&quot;examples.YetAnotherBean&quot;/&gt;</span><br></pre>
<p>The following example shows the corresponding ExampleBean class:</p>
<pre class="highlight"><span class="line">public class ExampleBean &#123;</span><br><span class="line"></span><br><span class="line">    // a private constructor</span><br><span class="line">    private ExampleBean(...) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // a static factory method; the arguments to this method can be</span><br><span class="line">    // considered the dependencies of the bean that is returned,</span><br><span class="line">    // regardless of how those arguments are actually used.</span><br><span class="line">    public static ExampleBean createInstance (</span><br><span class="line">        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) &#123;</span><br><span class="line"></span><br><span class="line">        ExampleBean eb = new ExampleBean (...);</span><br><span class="line">        // some other operations...</span><br><span class="line">        return eb;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Dependencies and Configuration in Detail (property inline)</p>
<p>Straight Values (Primitives, Strings, and so on)</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;myDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;</span><br><span class="line">    &lt;!-- results in a setDriverClassName(String) call --&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mydb&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;misterkaoli&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The following example uses the p-namespace for even more succinct XML configuration:</p>
<pre class="highlight"><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">    https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;myDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span><br><span class="line">        destroy-method=&quot;close&quot;</span><br><span class="line">        p:driverClassName=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">        p:url=&quot;jdbc:mysql://localhost:3306/mydb&quot;</span><br><span class="line">        p:username=&quot;root&quot;</span><br><span class="line">        p:password=&quot;misterkaoli&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>You can also configure a java.util.Properties instance, as follows:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;mappings&quot;</span><br><span class="line">    class=&quot;org.springframework.context.support.PropertySourcesPlaceholderConfigurer&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- typed as a java.util.Properties --&gt;</span><br><span class="line">    &lt;property name=&quot;properties&quot;&gt;</span><br><span class="line">        &lt;value&gt;</span><br><span class="line">            jdbc.driver.className=com.mysql.jdbc.Driver</span><br><span class="line">            jdbc.url=jdbc:mysql://localhost:3306/mydb</span><br><span class="line">        &lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The Spring container converts the text inside the &lt;value&gt; element into a java.util.Properties instance by using the JavaBeans PropertyEditor mechanism.</p>
<p>The idref element</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;theTargetBean&quot; class=&quot;...&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;theClientBean&quot; class=&quot;...&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;targetName&quot;&gt;</span><br><span class="line">        &lt;idref bean=&quot;theTargetBean&quot;/&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>pass the bean id string to the bean</p>
<p>The preceding bean definition snippet is exactly equivalent (at runtime) to the following snippet:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;theTargetBean&quot; class=&quot;...&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;client&quot; class=&quot;...&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;targetName&quot; value=&quot;theTargetBean&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The first form is preferable to the second, because using the idref tag lets the container validate at deployment time that the referenced, named bean actually exists.</p>
<p>References to Other Beans (Collaborators)</p>
<p>The following pair of listings shows how to use the parent attribute:</p>
<pre class="highlight"><span class="line">&lt;!-- in the parent context --&gt;</span><br><span class="line">&lt;bean id=&quot;accountService&quot; class=&quot;com.something.SimpleAccountService&quot;&gt;</span><br><span class="line">    &lt;!-- insert dependencies as required here --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<pre class="highlight"><span class="line">&lt;!-- in the child (descendant) context --&gt;</span><br><span class="line">&lt;bean id=&quot;accountService&quot; &lt;!-- bean name is the same as the parent bean --&gt;</span><br><span class="line">    class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;target&quot;&gt;</span><br><span class="line">        &lt;ref parent=&quot;accountService&quot;/&gt; &lt;!-- notice how we refer to the parent bean --&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;!-- insert other configuration and dependencies as required here --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Inner Beans</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;outer&quot; class=&quot;...&quot;&gt;</span><br><span class="line">    &lt;!-- instead of using a reference to a target bean, simply define the target bean inline --&gt;</span><br><span class="line">    &lt;property name=&quot;target&quot;&gt;</span><br><span class="line">        &lt;bean class=&quot;com.example.Person&quot;&gt; &lt;!-- this is the inner bean --&gt;</span><br><span class="line">            &lt;property name=&quot;name&quot; value=&quot;Fiona Apple&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;age&quot; value=&quot;25&quot;/&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>An inner bean definition does not require a defined ID or name.</p>
<p>Collections</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;moreComplexObject&quot; class=&quot;example.ComplexObject&quot;&gt;</span><br><span class="line">    &lt;!-- results in a setAdminEmails(java.util.Properties) call --&gt;</span><br><span class="line">    &lt;property name=&quot;adminEmails&quot;&gt;</span><br><span class="line">        &lt;props&gt;</span><br><span class="line">            &lt;prop key=&quot;administrator&quot;&gt;administrator@example.org&lt;/prop&gt;</span><br><span class="line">            &lt;prop key=&quot;support&quot;&gt;support@example.org&lt;/prop&gt;</span><br><span class="line">            &lt;prop key=&quot;development&quot;&gt;development@example.org&lt;/prop&gt;</span><br><span class="line">        &lt;/props&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;!-- results in a setSomeList(java.util.List) call --&gt;</span><br><span class="line">    &lt;property name=&quot;someList&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;value&gt;a list element followed by a reference&lt;/value&gt;</span><br><span class="line">            &lt;ref bean=&quot;myDataSource&quot; /&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;!-- results in a setSomeMap(java.util.Map) call --&gt;</span><br><span class="line">    &lt;property name=&quot;someMap&quot;&gt;</span><br><span class="line">        &lt;map&gt;</span><br><span class="line">            &lt;entry key=&quot;an entry&quot; value=&quot;just some string&quot;/&gt;</span><br><span class="line">            &lt;entry key=&quot;a ref&quot; value-ref=&quot;myDataSource&quot;/&gt;</span><br><span class="line">        &lt;/map&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;!-- results in a setSomeSet(java.util.Set) call --&gt;</span><br><span class="line">    &lt;property name=&quot;someSet&quot;&gt;</span><br><span class="line">        &lt;set&gt;</span><br><span class="line">            &lt;value&gt;just some string&lt;/value&gt;</span><br><span class="line">            &lt;ref bean=&quot;myDataSource&quot; /&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The value of a map key or value, or a set value, can also be any of the following elements:</p>
<pre class="highlight"><span class="line">bean | ref | idref | list | set | map | props | value | null</span><br></pre>
<p>Collection Merging</p>
<p>The following example demonstrates collection merging:</p>
<pre class="highlight"><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean id=&quot;parent&quot; abstract=&quot;true&quot; class=&quot;example.ComplexObject&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;adminEmails&quot;&gt;</span><br><span class="line">            &lt;props&gt;</span><br><span class="line">                &lt;prop key=&quot;administrator&quot;&gt;administrator@example.com&lt;/prop&gt;</span><br><span class="line">                &lt;prop key=&quot;support&quot;&gt;support@example.com&lt;/prop&gt;</span><br><span class="line">            &lt;/props&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=&quot;child&quot; parent=&quot;parent&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;adminEmails&quot;&gt;</span><br><span class="line">            &lt;!-- the merge is specified on the child collection definition --&gt;</span><br><span class="line">            &lt;props merge=&quot;true&quot;&gt;</span><br><span class="line">                &lt;prop key=&quot;sales&quot;&gt;sales@example.com&lt;/prop&gt;</span><br><span class="line">                &lt;prop key=&quot;support&quot;&gt;support@example.co.uk&lt;/prop&gt;</span><br><span class="line">            &lt;/props&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;beans&gt;</span><br></pre>
<p>Limitations of Collection Merging</p>
<blockquote>
<p>You cannot merge different collection types (such as a Map and a List). <br><br>
The merge attribute must be specified on the lower, inherited, child definition. <br></p>
</blockquote>
<p>Strongly-typed collection</p>
<p>only use string type</p>
<pre class="highlight"><span class="line">public class SomeClass &#123;</span><br><span class="line"></span><br><span class="line">    private Map&lt;String, Float&gt; accounts;</span><br><span class="line"></span><br><span class="line">    public void setAccounts(Map&lt;String, Float&gt; accounts) &#123;</span><br><span class="line">        this.accounts = accounts;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean id=&quot;something&quot; class=&quot;x.y.SomeClass&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;accounts&quot;&gt;</span><br><span class="line">            &lt;map&gt;</span><br><span class="line">                &lt;entry key=&quot;one&quot; value=&quot;9.99&quot;/&gt;</span><br><span class="line">                &lt;entry key=&quot;two&quot; value=&quot;2.75&quot;/&gt;</span><br><span class="line">                &lt;entry key=&quot;six&quot; value=&quot;3.99&quot;/&gt;</span><br><span class="line">            &lt;/map&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Thus, Spring’s type conversion infrastructure recognizes the various value elements as being of type Float, and the string values (9.99, 2.75, and 3.99) are converted into an actual Float type.</p>
<p>Null and Empty String Values</p>
<p>Spring treats empty arguments for properties and the like as empty Strings.</p>
 <pre class="highlight"><span class="line"> &lt;bean class=&quot;ExampleBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;email&quot; value=&quot;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The preceding example is equivalent to the following Java code:</p>
 <pre class="highlight"><span class="line">exampleBean.setEmail(&quot;&quot;);</span><br></pre>
<p>The &lt;null/&gt; element handles null values. The following listing shows an example:</p>
<pre class="highlight"><span class="line">&lt;bean class=&quot;ExampleBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;email&quot;&gt;</span><br><span class="line">        &lt;null/&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The preceding configuration is equivalent to the following Java code:</p>
<pre class="highlight"><span class="line">exampleBean.setEmail(null);</span><br></pre>
<p>XML Shortcut with the p-namespace</p>
<p>The p-namespace lets you use the bean element’s attributes (instead of nested &lt;property/&gt; elements) to describe your property values collaborating beans, or both.</p>
<pre class="highlight"><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean name=&quot;classic&quot; class=&quot;com.example.ExampleBean&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;email&quot; value=&quot;someone@somewhere.com&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean name=&quot;p-namespace&quot; class=&quot;com.example.ExampleBean&quot;</span><br><span class="line">        p:email=&quot;someone@somewhere.com&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>This next example includes two more bean definitions that both have a reference to another bean:</p>
<pre class="highlight"><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean name=&quot;john-classic&quot; class=&quot;com.example.Person&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; value=&quot;John Doe&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;spouse&quot; ref=&quot;jane&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean name=&quot;john-modern&quot;</span><br><span class="line">        class=&quot;com.example.Person&quot;</span><br><span class="line">        p:name=&quot;John Doe&quot;</span><br><span class="line">        p:spouse-ref=&quot;jane&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean name=&quot;jane&quot; class=&quot;com.example.Person&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; value=&quot;Jane Doe&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>XML Shortcut with the c-namespace</p>
<p>the c-namespace, introduced in Spring 3.1, allows inlined attributes for configuring the constructor arguments rather then nested constructor-arg elements.</p>
<pre class="highlight"><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;beanTwo&quot; class=&quot;x.y.ThingTwo&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;beanThree&quot; class=&quot;x.y.ThingThree&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- traditional declaration with optional argument names --&gt;</span><br><span class="line">    &lt;bean id=&quot;beanOne&quot; class=&quot;x.y.ThingOne&quot;&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;thingTwo&quot; ref=&quot;beanTwo&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;thingThree&quot; ref=&quot;beanThree&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg name=&quot;email&quot; value=&quot;something@somewhere.com&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- c-namespace declaration with argument names --&gt;</span><br><span class="line">    &lt;bean id=&quot;beanOne&quot; class=&quot;x.y.ThingOne&quot; c:thingTwo-ref=&quot;beanTwo&quot;</span><br><span class="line">        c:thingThree-ref=&quot;beanThree&quot; c:email=&quot;something@somewhere.com&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>you can use fallback to the argument indexes, as follows:</p>
<pre class="highlight"><span class="line">&lt;!-- c-namespace index declaration --&gt;</span><br><span class="line">&lt;bean id=&quot;beanOne&quot; class=&quot;x.y.ThingOne&quot; c:_0-ref=&quot;beanTwo&quot; c:_1-ref=&quot;beanThree&quot;</span><br><span class="line">    c:_2=&quot;something@somewhere.com&quot;/&gt;</span><br></pre>
<p>Compound Property Names</p>
<p>except the final property name are not null</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;something&quot; class=&quot;things.ThingOne&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;fred.bob.sammy&quot; value=&quot;123&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Using depends-on</p>
<p>However, sometimes dependencies between beans are less direct. <br><br>
An example is when a static initializer in a class needs to be triggered, such as for database driver registration.<br><br>
The depends-on attribute can explicitly force one or more beans to be initialized before the bean using this element is initialized.<br></p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;beanOne&quot; class=&quot;ExampleBean&quot; depends-on=&quot;manager&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;manager&quot; class=&quot;ManagerBean&quot; /&gt;</span><br></pre>
<p>To express a dependency on multiple beans:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;beanOne&quot; class=&quot;ExampleBean&quot; depends-on=&quot;manager,accountDao&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;manager&quot; ref=&quot;manager&quot; /&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;manager&quot; class=&quot;ManagerBean&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;accountDao&quot; class=&quot;x.y.jdbc.JdbcAccountDao&quot; /&gt;</span><br></pre>
<p>Lazy-initialized Beans</p>
<p>A lazy-initialized bean tells the IoC container to create a bean instance when it is first requested, rather than at startup.</p>
<p>In XML, this behavior is controlled by the lazy-init attribute on the &lt;bean/&gt; element, as the following example shows:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;lazy&quot; class=&quot;com.something.ExpensiveToCreateBean&quot; lazy-init=&quot;true&quot;/&gt;</span><br><span class="line">&lt;bean name=&quot;not.lazy&quot; class=&quot;com.something.AnotherBean&quot;/&gt;</span><br></pre>
<p>The lazy-initialized bean is injected into a singleton bean elsewhere that is not lazy-initialized.</p>
<p>You can also control lazy-initialization at the container level by using the default-lazy-init attribute on the <beans> element, as the following example shows:</beans></p>
<pre class="highlight"><span class="line">&lt;beans default-lazy-init=&quot;true&quot;&gt;</span><br><span class="line">    &lt;!-- no beans will be pre-instantiated... --&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Autowiring Collaborators</p>
<p>four autowiring modes</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>no</td>
<td>(default) no autowiring.</td>
</tr>
<tr>
<td>byName</td>
<td>autowiring by property name.</td>
</tr>
<tr>
<td>byType</td>
<td>Lets a property be autowired if exactly one bean of the property type exists in the container.</td>
</tr>
<tr>
<td>constructor</td>
<td>Analogous to byType but applies to constructor arguments.</td>
</tr>
</tbody>
</table>
<p>With byType or constructor autowiring mode, you can wire arrays and typed collections.</p>
<p>Limitations and Disadvantages of Autowiring</p>
<blockquote>
<p>Explicit dependencies in property and constructor-arg settings always override autowiring. <br><br>
You cannot autowire simple properties such as primitives <br><br>
Autowiring is less exact than explicit wiring. <br></p>
</blockquote>
<p>Excluding a Bean from Autowiring</p>
<pre class="highlight"><span class="line">set the autowire-candidate attribute of the &lt;bean/&gt; to false</span><br><span class="line"></span><br><span class="line">The autowire-candidate attribute is designed to only affect type-based autowiring</span><br></pre>
<p>Method Injection</p>
<p>A problem arises when the bean lifecycles are different. Suppose singleton bean A needs to use non-singleton (prototype) bean B, perhaps on each method invocation on A.</p>
<p>The following example shows this approach:</p>
<pre class="highlight"><span class="line">// a class that uses a stateful Command-style class to perform some processing</span><br><span class="line">package fiona.apple;</span><br><span class="line"></span><br><span class="line">// Spring-API imports</span><br><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.ApplicationContextAware;</span><br><span class="line"></span><br><span class="line">public class CommandManager implements ApplicationContextAware &#123;</span><br><span class="line"></span><br><span class="line">    private ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">    public Object process(Map commandState) &#123;</span><br><span class="line">        // grab a new instance of the appropriate Command</span><br><span class="line">        Command command = createCommand();</span><br><span class="line">        // set the state on the (hopefully brand new) Command instance</span><br><span class="line">        command.setState(commandState);</span><br><span class="line">        return command.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected Command createCommand() &#123;</span><br><span class="line">        // notice the Spring API dependency!</span><br><span class="line">        return this.applicationContext.getBean(&quot;command&quot;, Command.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setApplicationContext(</span><br><span class="line">            ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        this.applicationContext = applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>The preceding is not desirable, because the business code is aware of and coupled to the Spring Framework.</p>
<p>Lookup Method Injection</p>
<p>Lookup method injection is the ability of the container to override methods on container-managed beans and return the lookup result for another named bean in the container.</p>
<p>as the reworked example shows:</p>
<pre class="highlight"><span class="line">package fiona.apple;</span><br><span class="line"></span><br><span class="line">// no more Spring imports!</span><br><span class="line"></span><br><span class="line">public abstract class CommandManager &#123;</span><br><span class="line"></span><br><span class="line">    public Object process(Object commandState) &#123;</span><br><span class="line">        // grab a new instance of the appropriate Command interface</span><br><span class="line">        Command command = createCommand();</span><br><span class="line">        // set the state on the (hopefully brand new) Command instance</span><br><span class="line">        command.setState(commandState);</span><br><span class="line">        return command.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // okay... but where is the implementation of this method?</span><br><span class="line">    protected abstract Command createCommand();</span><br><span class="line">&#125;</span><br></pre>
<p>Consider the following example:</p>
 <pre class="highlight"><span class="line"> &lt;!-- a stateful bean deployed as a prototype (non-singleton) --&gt;</span><br><span class="line">&lt;bean id=&quot;myCommand&quot; class=&quot;fiona.apple.AsyncCommand&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">    &lt;!-- inject dependencies here as required --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- commandProcessor uses statefulCommandHelper --&gt;</span><br><span class="line">&lt;bean id=&quot;commandManager&quot; class=&quot;fiona.apple.CommandManager&quot;&gt;</span><br><span class="line">    &lt;lookup-method name=&quot;createCommand&quot; bean=&quot;myCommand&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>use @Lookup</p>
 <pre class="highlight"><span class="line"> public abstract class CommandManager &#123;</span><br><span class="line"></span><br><span class="line">    public Object process(Object commandState) &#123;</span><br><span class="line">        Command command = createCommand();</span><br><span class="line">        command.setState(commandState);</span><br><span class="line">        return command.execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Lookup(&quot;myCommand&quot;)</span><br><span class="line">    protected abstract Command createCommand();</span><br><span class="line">&#125;</span><br></pre>
<p>Arbitrary Method Replacement</p>
<p>skip</p>
<p>Bean Scopes</p>
<table>
<thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>singleton</td>
<td>(default) Scopes a single bean definition to a single object interface for each Spring IoC container.</td>
</tr>
<tr>
<td>prototype</td>
<td>Scopes a single bean definition to any number of object instances.</td>
</tr>
<tr>
<td>request</td>
<td>Scopes a single bean definition to the lifecycle of a single HTTP request.</td>
</tr>
<tr>
<td>session</td>
<td>Scopes a single bean definition to the lifecycle of an HTTP Session.</td>
</tr>
<tr>
<td>application</td>
<td>Scopes a single bean definition to the lifecycle of a ServletContext.</td>
</tr>
<tr>
<td>websocket</td>
<td>Scopes a single bean definition to the lifecycle of a WebSocket.</td>
</tr>
</tbody>
</table>
<p>The Singleton Scope</p>
<blockquote>
<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an ID or IDs that match that bean definition result in that one specific bean instance being returned by the Spring container.</p>
</blockquote>
<p>example :</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;accountService&quot; class=&quot;com.something.DefaultAccountService&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- the following is equivalent, though redundant (singleton scope is the default) --&gt;</span><br><span class="line">&lt;bean id=&quot;accountService&quot; class=&quot;com.something.DefaultAccountService&quot; scope=&quot;singleton&quot;/&gt;</span><br></pre>
<p>The Prototype Scope</p>
<blockquote>
<p>The non-singleton prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made.</p>
</blockquote>
<p>example :</p>
 <pre class="highlight"><span class="line">&lt;bean id=&quot;accountService&quot; class=&quot;com.something.DefaultAccountService&quot; scope=&quot;prototype&quot;/&gt;</span><br></pre>
<p>Singleton Beans with Prototype-bean Dependencies</p>
<blockquote>
<p>only set property once</p>
</blockquote>
<p>Request, Session, Application, and WebSocket Scopes</p>
<p>If use Web-aware Spring ApplicationContext like :</p>
<blockquote>
<p>XmlWebApplicationContext <br></p>
</blockquote>
<ul>
<li>Initial Web Configuration</li>
</ul>
<blockquote>
<p>If you access scoped beans within Spring Web MVC, in effect, within a request that is processed by the Spring DispatcherServlet, no special setup is necessary. DispatcherServlet already exposes all relevant state.</p>
</blockquote>
<blockquote>
<p>If you use a Servlet 2.5 web container, with requests processed outside of Spring’s DispatcherServlet (for example, when using JSF or Struts), you need to register the org.springframework.web.context.request.RequestContextListenerServletRequestListener</p>
</blockquote>
<blockquote>
<p>For Servlet 3.0+, this can be done programmatically by using the WebApplicationInitializer interface. Alternatively, or for older containers, add the following declaration to your web application’s web.xml file:</p>
</blockquote>
<pre class="highlight"><span class="line">&lt;web-app&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;listener&gt;</span><br><span class="line">        &lt;listener-class&gt;</span><br><span class="line">            org.springframework.web.context.request.RequestContextListener</span><br><span class="line">        &lt;/listener-class&gt;</span><br><span class="line">    &lt;/listener&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/web-app&gt;</span><br></pre>
<p>The following listing shows the filter part of a web application:</p>
<pre class="highlight"><span class="line">&lt;web-app&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">    &lt;filter-mapping&gt;</span><br><span class="line">        &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/filter-mapping&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/web-app&gt;</span><br></pre>
<blockquote>
<p>DispatcherServlet, RequestContextListener, and RequestContextFilter all do exactly the same thing, namely bind the HTTP request object to the Thread that is servicing that request. This makes beans that are request- and session-scoped available further down the call chain.</p>
</blockquote>
<p>Request scope</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;loginAction&quot; class=&quot;com.something.LoginAction&quot; scope=&quot;request&quot;/&gt;</span><br></pre>
<blockquote>
<p>The Spring container creates a new instance of the LoginAction bean by using the loginAction bean definition for each and every HTTP request.</p>
</blockquote>
<p>Session Scope</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;userPreferences&quot; class=&quot;com.something.UserPreferences&quot; scope=&quot;session&quot;/&gt;</span><br></pre>
<blockquote>
<p>The Spring container creates a new instance of the UserPreferences bean by using the userPreferences bean definition for the lifetime of a single HTTP Session.</p>
</blockquote>
<p>Application Scope</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;appPreferences&quot; class=&quot;com.something.AppPreferences&quot; scope=&quot;application&quot;/&gt;</span><br></pre>
<blockquote>
<p>The Spring container creates a new instance of the AppPreferences bean by using the appPreferences bean definition once for the entire web application.</p>
</blockquote>
<p>WebSocket Scope</p>
<p>WebSocket scope is associated with the lifecycle of a WebSocket session and applies to STOMP over WebSocket applications</p>
<p>Scoped Beans as Dependencies</p>
<blockquote>
<p>If you want to inject (for example) an HTTP request-scoped bean into another bean of a longer-lived scope, you may choose to inject an AOP proxy in place of the scoped bean.</p>
</blockquote>
<p>example:</p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/aop</span><br><span class="line">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- an HTTP Session-scoped bean exposed as a proxy --&gt;</span><br><span class="line">    &lt;bean id=&quot;userPreferences&quot; class=&quot;com.something.UserPreferences&quot; scope=&quot;session&quot;&gt;</span><br><span class="line">        &lt;!-- instructs the container to proxy the surrounding bean --&gt;</span><br><span class="line">        &lt;aop:scoped-proxy/&gt; </span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- a singleton-scoped bean injected with a proxy to the above bean --&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.something.SimpleUserService&quot;&gt;</span><br><span class="line">        &lt;!-- a reference to the proxied userPreferences bean --&gt;</span><br><span class="line">        &lt;property name=&quot;userPreferences&quot; ref=&quot;userPreferences&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Choosing the Type of Proxy to Create</p>
<p>By default, &lt;aop:scoped-proxy/&gt; create proxy class by CGLIB</p>
<p>use the standard JDK interface-based proxies:</p>
<pre class="highlight"><span class="line">&lt;!-- DefaultUserPreferences implements the UserPreferences interface --&gt;</span><br><span class="line">&lt;bean id=&quot;userPreferences&quot; class=&quot;com.stuff.DefaultUserPreferences&quot; scope=&quot;session&quot;&gt;</span><br><span class="line">    &lt;aop:scoped-proxy proxy-target-class=&quot;false&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;userManager&quot; class=&quot;com.stuff.UserManager&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;userPreferences&quot; ref=&quot;userPreferences&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Custom Scopes</p>
<p>Creating a Custom Scope</p>
<blockquote>
<p>org.springframework.beans.factory.config.Scope interface</p>
</blockquote>
<p>The following method returns the object from the underlying scope:</p>
<pre class="highlight"><span class="line">Object get(String name, ObjectFactory&lt;?&gt; objectFactory)</span><br></pre>
<p>The following method removes the object from the underlying scope:</p>
<pre class="highlight"><span class="line">Object remove(String name)</span><br></pre>
<p>The following method registers a callback that the scope should invoke when it is destroyed or when the specified object in the scope is destroyed:</p>
<pre class="highlight"><span class="line">void registerDestructionCallback(String name, Runnable destructionCallback)</span><br></pre>
<p>The following method obtains the conversation identifier for the underlying scope:</p>
<pre class="highlight"><span class="line">String getConversationId()</span><br></pre>
<p>Using a Custom Scope</p>
<p>The following method is the central method to register a new Scope with the Spring container:</p>
<pre class="highlight"><span class="line">void registerScope(String scopeName, Scope scope);</span><br></pre>
<blockquote>
<p>The method is declared on ConfigurableBeanFactory interface</p>
</blockquote>
<p>example:</p>
<pre class="highlight"><span class="line">Scope threadScope = new SimpleThreadScope();</span><br><span class="line">beanFactory.registerScope(&quot;thread&quot;, threadScope);</span><br></pre>
<p>You can then create bean definitions that adhere to the scoping rules of your custom Scope, as follows:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;...&quot; class=&quot;...&quot; scope=&quot;thread&quot;&gt;</span><br></pre>
<p>With a custom Scope implementation, you are not limited to programmatic registration of the scope. You can also do the Scope registration declaratively, by using the CustomScopeConfigurer class, as the following example shows:</p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/aop</span><br><span class="line">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean class=&quot;org.springframework.beans.factory.config.CustomScopeConfigurer&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;scopes&quot;&gt;</span><br><span class="line">            &lt;map&gt;</span><br><span class="line">                &lt;entry key=&quot;thread&quot;&gt;</span><br><span class="line">                    &lt;bean class=&quot;org.springframework.context.support.SimpleThreadScope&quot;/&gt;</span><br><span class="line">                &lt;/entry&gt;</span><br><span class="line">            &lt;/map&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;thing2&quot; class=&quot;x.y.Thing2&quot; scope=&quot;thread&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; value=&quot;Rick&quot;/&gt;</span><br><span class="line">        &lt;aop:scoped-proxy/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;thing1&quot; class=&quot;x.y.Thing1&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;thing2&quot; ref=&quot;thing2&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Customizing the Nature of a Bean</p>
<blockquote>
<p>Lifecycle Callbacks <br><br>
ApplicationContextAware and BeanNameAware <br><br>
Other Aware Interfaces <br></p>
</blockquote>
<p>Lifecycle Callbacks</p>
<blockquote>
<p>InitializingBean - afterPropertiesSet() <br><br>
DisposableBean - destroy() <br><br>
BeanPostProcessor <br><br>
Lifecycle <br></p>
</blockquote>
<p>Initialization Callbacks</p>
<blockquote>
<p>org.springframework.beans.factory.InitializingBean</p>
</blockquote>
<pre class="highlight"><span class="line">void afterPropertiesSet() throws Exception;</span><br></pre>
<p>lets a bean perform initialization work after the container has set all necessary properties on the bean.</p>
<blockquote>
<p>do not use InitializingBean interface instead of @PostConstruct or init-method</p>
</blockquote>
<p>Destruction Callbacks</p>
<blockquote>
<p>org.springframework.beans.factory.DisposableBean</p>
</blockquote>
<pre class="highlight"><span class="line">void destroy() throws Exception;</span><br></pre>
<blockquote>
<p>do not use DisposableBean interface instead of @PreDestory or destroy-method</p>
</blockquote>
<p>Default Initialization and Destroy Methods</p>
<p>example:</p>
<pre class="highlight"><span class="line">&lt;beans default-init-method=&quot;init&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;blogService&quot; class=&quot;com.something.DefaultBlogService&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;blogDao&quot; ref=&quot;blogDao&quot; /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Combining Lifecycle Mechanisms</p>
<p>As of Spring 2.5, you have three options for controlling bean lifecycle behavior:</p>
<blockquote>
<p>The InitializingBean and DisposableBean callback interfaces <br><br>
Custom init() and destroy() methods <br><br>
The @PostConstruct and @PreDestroy annotations. You can combine these mechanisms to control a given bean.</p>
</blockquote>
<p>Multiple lifecycle mechanisms configured for the same bean, with different initialization methods, are called as follows:</p>
<blockquote>
<ol>
<li>Methods annotated with @PostConstruct <br></li>
<li>afterPropertiesSet() as defined by the InitializingBean callback interface <br></li>
<li>A custom configured init() method <br></li>
</ol>
</blockquote>
<p>Destroy methods are called in the same order:</p>
<blockquote>
<ol>
<li>Methods annotated with @PreDestroy <br></li>
<li>destroy() as defined by the DisposableBean callback interface <br></li>
<li>A custom configured destroy() method</li>
</ol>
</blockquote>
<p>Startup and Shutdown Callbacks</p>
<pre class="highlight"><span class="line">public interface Lifecycle &#123;</span><br><span class="line"></span><br><span class="line">    void start();</span><br><span class="line"></span><br><span class="line">    void stop();</span><br><span class="line"></span><br><span class="line">    boolean isRunning();</span><br><span class="line">&#125;</span><br></pre>
<p>Then, when the ApplicationContext itself receives start and stop signals (for example, for a stop/restart scenario at runtime), it cascades those calls to all Lifecycle implementations defined within that context. It does this by delegating to a LifecycleProcessor, shown in the following listing:</p>
<pre class="highlight"><span class="line">public interface LifecycleProcessor extends Lifecycle &#123;</span><br><span class="line"></span><br><span class="line">    void onRefresh();</span><br><span class="line"></span><br><span class="line">    void onClose();</span><br><span class="line">&#125;</span><br></pre>
<p>For fine-grained control over auto-startup of a specific bean (including startup phases), consider implementing org.springframework.context.SmartLifecycle instead.</p>
<blockquote>
<p>SmartLifecycle</p>
</blockquote>
<pre class="highlight"><span class="line">public interface Phased &#123;</span><br><span class="line"></span><br><span class="line">    int getPhase();</span><br><span class="line">&#125;</span><br></pre>
<p>The following listing shows the definition of the SmartLifecycle interface:</p>
<pre class="highlight"><span class="line">public interface SmartLifecycle extends Lifecycle, Phased &#123;</span><br><span class="line"></span><br><span class="line">    boolean isAutoStartup();</span><br><span class="line"></span><br><span class="line">    void stop(Runnable callback);</span><br><span class="line">&#125;</span><br></pre>
<blockquote>
<p>When starting, the objects with the lowest phase start first.<br>
When stopping, the reverse order is followed.</p>
</blockquote>
<p>Shutting Down the Spring IoC Container Gracefully in Non-Web Applications</p>
<p>To register a shutdown hook, call the registerShutdownHook() method that is declared on the ConfigurableApplicationContext interface, as the following example shows:</p>
<pre class="highlight"><span class="line">import org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line">public final class Boot &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(final String[] args) throws Exception &#123;</span><br><span class="line">        ConfigurableApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);</span><br><span class="line"></span><br><span class="line">        // add a shutdown hook for the above context...</span><br><span class="line">        ctx.registerShutdownHook();</span><br><span class="line"></span><br><span class="line">        // app runs here...</span><br><span class="line"></span><br><span class="line">        // main method exits, hook is called prior to the app shutting down...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>ApplicationContextAware and BeanNameAware</p>
<p>the instance is provided with a reference to that ApplicationContext</p>
<pre class="highlight"><span class="line">public interface ApplicationContextAware &#123;</span><br><span class="line"></span><br><span class="line">    void setApplicationContext(ApplicationContext applicationContext) throws BeansException;</span><br><span class="line">&#125;</span><br></pre>
<p>The following listing shows the definition of the BeanNameAware interface:</p>
<pre class="highlight"><span class="line">public interface BeanNameAware &#123;</span><br><span class="line"></span><br><span class="line">    void setBeanName(String name) throws BeansException;</span><br><span class="line">&#125;</span><br></pre>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-other-injection"> Other Aware Interfaces </a></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Injected Dependency</th>
</tr>
</thead>
<tbody>
<tr>
<td>ApplicationContextAware</td>
<td>Declaring ApplicationContext.</td>
</tr>
<tr>
<td>ApplicationEventPublisherAware</td>
<td>Event publisher of the enclosing ApplicationContext.</td>
</tr>
<tr>
<td>BeanClassLoaderAware</td>
<td>Class loader used to load the bean classes.</td>
</tr>
<tr>
<td>BeanFactoryAware</td>
<td>Declaring BeanFactory.</td>
</tr>
<tr>
<td>BeanNameAware</td>
<td>Name of the declaring bean.</td>
</tr>
<tr>
<td>LoadTimeWeaverAware</td>
<td>Defined weaver for processing class definition at load time.</td>
</tr>
<tr>
<td>MessageSourceAware</td>
<td>Configured strategy for resolving messages (with support for parametrization and internationalization).</td>
</tr>
<tr>
<td>NotificationPublisherAware</td>
<td>Spring JMX notification publisher.</td>
</tr>
<tr>
<td>ResourceLoaderAware</td>
<td>Configured loader for low-level access to resources.</td>
</tr>
<tr>
<td>ServletConfigAware</td>
<td>Current ServletConfig the container runs in. Valid only in a web-aware Spring ApplicationContext.</td>
</tr>
<tr>
<td>ServletContextAware</td>
<td>Current ServletContext the container runs in. Valid only in a web-aware Spring ApplicationContext.</td>
</tr>
</tbody>
</table>
<p>Bean Definition Inheritance</p>
<blockquote>
<p>ChildBeanDefinition - represents child bean definition <br><br>
using parent attribute in XML-based metadata</p>
</blockquote>
<p>example shows below:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;inheritedTestBean&quot; abstract=&quot;true&quot;</span><br><span class="line">        class=&quot;org.springframework.beans.TestBean&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;parent&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;age&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;inheritsWithDifferentClass&quot;</span><br><span class="line">        class=&quot;org.springframework.beans.DerivedTestBean&quot;</span><br><span class="line">        parent=&quot;inheritedTestBean&quot; init-method=&quot;initialize&quot;&gt;  </span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;override&quot;/&gt;</span><br><span class="line">    &lt;!-- the age property value of 1 will be inherited from parent --&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>If the parent definition does not specify a class, explicitly marking the parent bean definition as abstract is required, as the following example shows:</p>
<pre class="highlight"><span class="line">&lt;bean id=&quot;inheritedTestBeanWithoutClass&quot; abstract=&quot;true&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;parent&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;age&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;inheritsWithClass&quot; class=&quot;org.springframework.beans.DerivedTestBean&quot;</span><br><span class="line">        parent=&quot;inheritedTestBeanWithoutClass&quot; init-method=&quot;initialize&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;override&quot;/&gt;</span><br><span class="line">    &lt;!-- age will inherit the value of 1 from the parent bean definition--&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>Container Extension Points</p>
<p>Customizing Beans by Using a BeanPostProcessor</p>
<blockquote>
<p>defines callback methods <br><br>
If you want to implement some custom logic after the Spring container finishes instantiating, configuring, and initializing a bean, you can plug in one or more custom BeanPostProcessor implementations. <br><br>
implement Ordered interface to control the order <br><br>
ConfigurableBeanFactory using addBeanPostProcessor to register <br><br>
register through ApplicationContext auto-detection <br></p>
</blockquote>
<pre class="highlight"><span class="line">package scripting;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line"></span><br><span class="line">public class InstantiationTracingBeanPostProcessor implements BeanPostProcessor &#123;</span><br><span class="line"></span><br><span class="line">    // simply return the instantiated bean as-is</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) &#123;</span><br><span class="line">        return bean; // we could potentially return any object reference here...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object postProcessAfterInitialization(Object bean, String beanName) &#123;</span><br><span class="line">        System.out.println(&quot;Bean &#x27;&quot; + beanName + &quot;&#x27; created : &quot; + bean.toString());</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/lang</span><br><span class="line">        https://www.springframework.org/schema/lang/spring-lang.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;lang:groovy id=&quot;messenger&quot;</span><br><span class="line">            script-source=&quot;classpath:org/springframework/scripting/groovy/Messenger.groovy&quot;&gt;</span><br><span class="line">        &lt;lang:property name=&quot;message&quot; value=&quot;Fiona Apple Is Just So Dreamy.&quot;/&gt;</span><br><span class="line">    &lt;/lang:groovy&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">    when the above bean (messenger) is instantiated, this custom</span><br><span class="line">    BeanPostProcessor implementation will output the fact to the system console</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;bean class=&quot;scripting.InstantiationTracingBeanPostProcessor&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Customizing Configuration Metadata with a BeanFactoryPostProcessor</p>
<blockquote>
<p>BeanFactoryPostProcessor operates on the bean configuration metadata. <br><br>
implement Ordered interface for order <br></p>
</blockquote>
<p>The Class Name Substitution PropertySourcesPlaceholderConfigurer</p>
<p>example (property follows the Ant and log4j and JSP EL style.):</p>
<pre class="highlight"><span class="line">&lt;bean class=&quot;org.springframework.context.support.PropertySourcesPlaceholderConfigurer&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;locations&quot; value=&quot;classpath:com/something/jdbc.properties&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;dataSource&quot; destroy-method=&quot;close&quot;</span><br><span class="line">        class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driverClassName&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre>
<p>The actual values come from another file in the standard Java Properties format:</p>
<pre class="highlight"><span class="line">jdbc.driverClassName=org.hsqldb.jdbcDriver</span><br><span class="line">jdbc.url=jdbc:hsqldb:hsql://production:9002</span><br><span class="line">jdbc.username=sa</span><br><span class="line">jdbc.password=root</span><br></pre>
<pre class="highlight"><span class="line">&lt;context:property-placeholder location=&quot;classpath:com/something/jdbc.properties&quot;/&gt;</span><br></pre>
<p>Customizing Instantiation Logic with a FactoryBean</p>
<blockquote>
<p>The FactoryBean interface is a point of pluggability into the Spring IoC container’s instantiation logic <br></p>
</blockquote>
<p>Annotation-based Container Configuration</p>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>The &lt;context:annotation-config/&gt; element implicitly registers the following post-processors:</p>
<blockquote>
<p>ConfigurationClassPostProcessor <br><br>
AutowiredAnnotationBeanPostProcessor <br><br>
CommonAnnotationBeanPostProcessor <br><br>
PersistenceAnnotationBeanPostProcessor <br><br>
EventListenerMethodProcessor <br></p>
</blockquote>
<p>@Required</p>
<p>example :</p>
<pre class="highlight"><span class="line">public class SimpleMovieLister &#123;</span><br><span class="line"></span><br><span class="line">    private MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    @Required</span><br><span class="line">    public void setMovieFinder(MovieFinder movieFinder) &#123;</span><br><span class="line">        this.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>Using @Autowired</p>
<p>example :</p>
<pre class="highlight"><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    private final CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) &#123;</span><br><span class="line">        this.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>setter ID :</p>
<pre class="highlight"><span class="line">public class SimpleMovieLister &#123;</span><br><span class="line"></span><br><span class="line">    private MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public void setMovieFinder(MovieFinder movieFinder) &#123;</span><br><span class="line">        this.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>You can also apply the annotation to methods with arbitrary names and multiple arguments, as the following example shows:</p>
<pre class="highlight"><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    private MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    private CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public void prepare(MovieCatalog movieCatalog,</span><br><span class="line">            CustomerPreferenceDao customerPreferenceDao) &#123;</span><br><span class="line">        this.movieCatalog = movieCatalog;</span><br><span class="line">        this.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>You can apply @Autowired to fields as well and even mix it with constructors, as the following example shows:</p>
<pre class="highlight"><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    private final CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) &#123;</span><br><span class="line">        this.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>A non-required method will not be called at all if its dependency (or one of its dependencies, in case of multiple arguments) is not available.</p>
<pre class="highlight"><span class="line">public class SimpleMovieLister &#123;</span><br><span class="line"></span><br><span class="line">    private MovieFinder movieFinder;</span><br><span class="line"></span><br><span class="line">    @Autowired(required = false)</span><br><span class="line">    public void setMovieFinder(MovieFinder movieFinder) &#123;</span><br><span class="line">        this.movieFinder = movieFinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<p>Fine-tuning Annotation-based Autowiring with @Primary</p>
<p>@Primary indicates that a particular bean should be given preference when multiple beans are candidates to be autowired to a single-valued dependency.</p>
<pre class="highlight"><span class="line">@Configuration</span><br><span class="line">public class MovieConfiguration &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @Primary</span><br><span class="line">    public MovieCatalog firstMovieCatalog() &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public MovieCatalog secondMovieCatalog() &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean class=&quot;example.SimpleMovieCatalog&quot; primary=&quot;true&quot;&gt;</span><br><span class="line">        &lt;!-- inject any dependencies required by this bean --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean class=&quot;example.SimpleMovieCatalog&quot;&gt;</span><br><span class="line">        &lt;!-- inject any dependencies required by this bean --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;movieRecommender&quot; class=&quot;example.MovieRecommender&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>Fine-tuning Annotation-based Autowiring with Qualifiers</p>
<p>example :</p>
<pre class="highlight"><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    @Qualifier(&quot;main&quot;)</span><br><span class="line">    private MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    private MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    private CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public void prepare(@Qualifier(&quot;main&quot;) MovieCatalog movieCatalog,</span><br><span class="line">            CustomerPreferenceDao customerPreferenceDao) &#123;</span><br><span class="line">        this.movieCatalog = movieCatalog;</span><br><span class="line">        this.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean class=&quot;example.SimpleMovieCatalog&quot;&gt;</span><br><span class="line">        &lt;qualifier value=&quot;main&quot;/&gt; </span><br><span class="line"></span><br><span class="line">        &lt;!-- inject any dependencies required by this bean --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean class=&quot;example.SimpleMovieCatalog&quot;&gt;</span><br><span class="line">        &lt;qualifier value=&quot;action&quot;/&gt; </span><br><span class="line"></span><br><span class="line">        &lt;!-- inject any dependencies required by this bean --&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;movieRecommender&quot; class=&quot;example.MovieRecommender&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre>
<p>@Resource is supported only for fields and bean property setter methods with a single argument.</p>
<p>Using @Value</p>
<pre class="highlight"><span class="line">@Component</span><br><span class="line">public class MovieRecommender &#123;</span><br><span class="line"></span><br><span class="line">    private final String catalog;</span><br><span class="line"></span><br><span class="line">    public MovieRecommender(@Value(&quot;$&#123;catalog.name&#125;&quot;) String catalog) &#123;</span><br><span class="line">        this.catalog = catalog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">@Configuration</span><br><span class="line">@PropertySource(&quot;classpath:application.properties&quot;)</span><br><span class="line">public class AppConfig &#123; &#125;</span><br></pre>
<pre class="highlight"><span class="line">catalog.name=MovieCatalog</span><br></pre>
<pre class="highlight"><span class="line">@Configuration</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() &#123;</span><br><span class="line">        return new PropertySourcesPlaceholderConfigurer();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<p>Support for Web Applications with AnnotationConfigWebApplicationContext</p>
<pre class="highlight"><span class="line">&lt;web-app&gt;</span><br><span class="line">    &lt;!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext</span><br><span class="line">        instead of the default XmlWebApplicationContext --&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextClass&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;</span><br><span class="line">            org.springframework.web.context.support.AnnotationConfigWebApplicationContext</span><br><span class="line">        &lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Configuration locations must consist of one or more comma- or space-delimited</span><br><span class="line">        fully-qualified @Configuration classes. Fully-qualified packages may also be</span><br><span class="line">        specified for component-scanning --&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;com.acme.AppConfig&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Bootstrap the root application context as usual using ContextLoaderListener --&gt;</span><br><span class="line">    &lt;listener&gt;</span><br><span class="line">        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">    &lt;/listener&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Declare a Spring MVC DispatcherServlet as usual --&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">        &lt;!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext</span><br><span class="line">            instead of the default XmlWebApplicationContext --&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;contextClass&lt;/param-name&gt;</span><br><span class="line">            &lt;param-value&gt;</span><br><span class="line">                org.springframework.web.context.support.AnnotationConfigWebApplicationContext</span><br><span class="line">            &lt;/param-value&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">        &lt;!-- Again, config locations must consist of one or more comma- or space-delimited</span><br><span class="line">            and fully-qualified @Configuration classes --&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">            &lt;param-value&gt;com.acme.web.MvcConfig&lt;/param-value&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- map all requests for /app/* to the dispatcher servlet --&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre>

  </div>
  <div>
    
      <div 
        class="post-note note-warning copyright" 
        style="margin-top: 42px">
        <p>
          <span style="font-weight: bold;">作者：</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="/about">
            Bluee
          </a>
        </p>
        <p>
          <span style="font-weight: bold;">文章链接：</span><a 
            target="_blank" 
            rel="nofollow noopener noreferrer" 
            href="https://yangzhaoxing90.github.io/2022/07/25/Spring%20Framework%205.3.22/">
            https://yangzhaoxing90.github.io/2022/07/25/Spring%20Framework%205.3.22/
          </a>
        </p>
        <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
      </div>
    
  </div>
</article>
<div class="nav">
  
    <div class="nav-item-prev">
      <a 
        href="/2022/08/03/book-post-view/" 
        class="nav-link">
        <i class="iconfont icon-left nav-prev-icon"></i>
        <div>
          <div class="nav-label">Prev</div>
          
            <div class="nav-title">book post view </div>
          
        </div>
      </a>
    </div>
  
  
    <div class="nav-item-next">
      <a 
        href="/2022/06/23/atCoder/" 
        class="nav-link">
        <div>
          <div class="nav-label">Next</div>
          
            <div class="nav-title">atCoder </div>
          
        </div>
        <i class="iconfont icon-right nav-next-icon"></i>
      </a>
    </div>
  
</div>

<div 
  class="card card-content toc-card" 
  id="mobiletoc">
  <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring-framework-5322"><span class="toc-text"> Spring Framework 5.3.22</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#overview"><span class="toc-text"> Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#what-we-mean-by-spring"><span class="toc-text"> What we mean by “Spring”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history-of-spring-and-the-spring-framework"><span class="toc-text"> History of Spring and the Spring Framework</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#design-philosophy"><span class="toc-text"> Design Philosophy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#feedback"><span class="toc-text"> Feedback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getting-started"><span class="toc-text"> Getting Started</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#core"><span class="toc-text"> Core</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#the-ioc-container"><span class="toc-text"> The IOC Container</span></a></li></ol></li></ol></li></ol>
</div></main>
            <aside class="left-column">
              
              <div class="card card-author">
                
  <img 
    src="/img/author.png" 
    class="author-img"
    width="88"
    height="88"
    alt="author avatar">

<p class="author-name">Bluee</p>
<p class="author-description">A programmer with interest</p>
<div class="author-message">
  <a 
    class="author-posts-count" 
    href="/archives">
    <span>16</span>
    <span>Posts</span>
  </a>
  <a 
    class="author-categories-count" 
    href="/categories">
    <span>0</span>
    <span>Categories</span>
  </a>
  <a 
    class="author-tags-count" 
    href="/tags">
    <span>20</span>
    <span>Tags</span>
  </a>
</div>

              </div>
               <div class="sticky-tablet">
  
  
    <article class="display-when-two-columns spacer">
      <div class="card card-content toc-card">
        <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring-framework-5322"><span class="toc-text"> Spring Framework 5.3.22</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#overview"><span class="toc-text"> Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#what-we-mean-by-spring"><span class="toc-text"> What we mean by “Spring”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history-of-spring-and-the-spring-framework"><span class="toc-text"> History of Spring and the Spring Framework</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#design-philosophy"><span class="toc-text"> Design Philosophy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#feedback"><span class="toc-text"> Feedback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getting-started"><span class="toc-text"> Getting Started</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#core"><span class="toc-text"> Core</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#the-ioc-container"><span class="toc-text"> The IOC Container</span></a></li></ol></li></ol></li></ol>
      </div>
    </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header">
    <i 
      class="iconfont icon-fenlei" 
      style="padding-right: 2px;">
    </i>Categories
  </div>
  <div class="categories-list">
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header">
    <i 
      class="iconfont icon-biaoqian" 
      style="padding-right: 2px;">
    </i>hot tags
  </div>
  <div class="tags-list">
    
      <a 
        href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" 
        title="微信小程序">
        <div class="tags-list-item">微信小程序</div>
      </a>
    
      <a 
        href="/tags/vantui/" 
        title="vantui">
        <div class="tags-list-item">vantui</div>
      </a>
    
      <a 
        href="/tags/axure/" 
        title="axure">
        <div class="tags-list-item">axure</div>
      </a>
    
      <a 
        href="/tags/%E5%BE%AE%E7%A7%AF%E5%88%86/" 
        title="微积分">
        <div class="tags-list-item">微积分</div>
      </a>
    
      <a 
        href="/tags/%E5%BE%AE%E4%BF%A1%E4%BA%91%E5%BC%80%E5%8F%91/" 
        title="微信云开发">
        <div class="tags-list-item">微信云开发</div>
      </a>
    
      <a 
        href="/tags/Linux/" 
        title="Linux">
        <div class="tags-list-item">Linux</div>
      </a>
    
      <a 
        href="/tags/Unix/" 
        title="Unix">
        <div class="tags-list-item">Unix</div>
      </a>
    
      <a 
        href="/tags/atCoder/" 
        title="atCoder">
        <div class="tags-list-item">atCoder</div>
      </a>
    
      <a 
        href="/tags/hexo/" 
        title="hexo">
        <div class="tags-list-item">hexo</div>
      </a>
    
      <a 
        href="/tags/xd/" 
        title="xd">
        <div class="tags-list-item">xd</div>
      </a>
    
      <a 
        href="/tags/leetcode/" 
        title="leetcode">
        <div class="tags-list-item">leetcode</div>
      </a>
    
      <a 
        href="/tags/spring/" 
        title="spring">
        <div class="tags-list-item">spring</div>
      </a>
    
      <a 
        href="/tags/%E8%A7%82%E5%90%8E%E6%84%9F/" 
        title="观后感">
        <div class="tags-list-item">观后感</div>
      </a>
    
      <a 
        href="/tags/jsp/" 
        title="jsp">
        <div class="tags-list-item">jsp</div>
      </a>
    
      <a 
        href="/tags/servlet/" 
        title="servlet">
        <div class="tags-list-item">servlet</div>
      </a>
    
      <a 
        href="/tags/MySQL/" 
        title="MySQL">
        <div class="tags-list-item">MySQL</div>
      </a>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
            <aside class="right-column">
              <div class="sticky-widescreen">
  
  
    <article class="card card-content toc-card">
      <div class="toc-header">
  <i 
    class="iconfont icon-menu" 
    style="padding-right: 2px;">
  </i>TOC
</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring-framework-5322"><span class="toc-text"> Spring Framework 5.3.22</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#overview"><span class="toc-text"> Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#what-we-mean-by-spring"><span class="toc-text"> What we mean by “Spring”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#history-of-spring-and-the-spring-framework"><span class="toc-text"> History of Spring and the Spring Framework</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#design-philosophy"><span class="toc-text"> Design Philosophy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#feedback"><span class="toc-text"> Feedback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getting-started"><span class="toc-text"> Getting Started</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#core"><span class="toc-text"> Core</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#the-ioc-container"><span class="toc-text"> The IOC Container</span></a></li></ol></li></ol></li></ol>
    </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header">
    <i 
      class="iconfont icon-wenzhang_huaban" 
      style="padding-right: 2px;">
    </i>Recent Posts
  </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-08-08</div>
        <a href="/2022/08/08/MapleStory-Stronger-Guide/"><div class="recent-posts-item-content">MapleStory Stronger Guide</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-08-04</div>
        <a href="/2022/08/04/Servlet-and-Jsp/"><div class="recent-posts-item-content">Servlet and Jsp</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-08-03</div>
        <a href="/2022/08/03/book-post-view/"><div class="recent-posts-item-content">book post view</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2022-07-25</div>
        <a href="/2022/07/25/Spring%20Framework%205.3.22/"><div class="recent-posts-item-content">Spring-Framework 5.3.22</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
            </aside>
          </div>
        </div>
      </div>
    </div>
     
    <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>
          Copyright ©
          
            2020
          
          
                - 
                2022
          
        </span>
        &nbsp;
        <a 
          href="/" 
          class="footer-link">
          Bluee's blog
        </a>
      </div>
    </div>

    
      <div class="footer-dsc">
        
          Powered by
          <a 
            href="https://hexo.io/" 
            class="footer-link" 
            target="_blank" 
            rel="nofollow noopener noreferrer">
            &nbsp;Hexo
          </a>
        
        
          <span>&nbsp;|&nbsp;</span>
        
        
          Theme -
          <a 
            href="https://github.com/theme-kaze" 
            class="footer-link" 
            target="_blank"
            rel="nofollow noopener noreferrer">
            &nbsp;Kaze
          </a>
        
      </div>
    
    
    
    
</footer>
 
    
  <a 
    role="button" 
    id="scrollbutton" 
    class="basebutton" 
    aria-label="回到顶部">
    <i class="iconfont icon-arrowleft button-icon"></i>
  </a>

<a 
  role="button" 
  id="menubutton"
  aria-label="menu button"
  class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a 
  role="button" 
  id="popbutton" 
  class="basebutton" 
  aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a 
  role="button" 
  id="darkbutton" 
  class="basebutton darkwidget" 
  aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a 
  role="button" 
  id="searchbutton" 
  class="basebutton searchwidget" 
  aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a> 
     
     
      
 
     
     
      <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img')
    var i
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a')
      wrapper.setAttribute('href', img[i].getAttribute('data-src'))
      wrapper.setAttribute('aria-label', 'illustration')
      wrapper.style.cssText =
        'width: 100%; display: flex; justify-content: center;'
      if (img[i].alt) wrapper.dataset.caption = img[i].alt
      wrapper.dataset.nolink = true
      img[i].before(wrapper)
      wrapper.append(img[i])
      var divWrap = document.createElement('div')
      divWrap.classList.add('gallery')
      wrapper.before(divWrap)
      divWrap.append(wrapper)
    }
    baguetteBox.run('.gallery')
  }
</script>
<script>
  loadScript(
    "/js/lib/lightbox/baguetteBox.min.js",
    addImgLayout
  )
</script>
 
     
     
    <script src="/js/main.js"></script> 
     
    
      <script>
        var addLazyload = function () {
          var observer = lozad('.lozad', {
            load: function (el) {
              el.srcset = el.getAttribute('data-src')
            },
            loaded: function (el) {
              el.classList.add('loaded')
            },
          })
          observer.observe()
        }
      </script>
      <script>
        loadScript('/js/lib/lozad.min.js', addLazyload)
      </script>
     
    
    
  </body>
</html>
